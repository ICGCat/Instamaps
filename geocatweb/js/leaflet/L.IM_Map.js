var catContorn= [new L.LatLng(42.52127, 1.75193),new L.LatLng(42.51292, 1.78418),new L.LatLng(42.51708, 1.8064),new L.LatLng(42.51089, 1.83754),new L.LatLng(42.50362, 1.85641),new L.LatLng(42.49134, 1.87401),new L.LatLng(42.48338, 1.8987),new L.LatLng(42.47584, 1.91122),new L.LatLng(42.47955, 1.92571),new L.LatLng(42.49385, 1.933),new L.LatLng(42.51273, 1.95286),new L.LatLng(42.51816, 1.96316),new L.LatLng(42.5209, 1.98903),new L.LatLng(42.5167, 2.00824),new L.LatLng(42.49053, 2.0376),new L.LatLng(42.48699, 2.05246),new L.LatLng(42.47121, 2.05982),new L.LatLng(42.46612, 2.04484),new L.LatLng(42.44686, 2.04971),new L.LatLng(42.42989, 2.03843),new L.LatLng(42.42351, 2.02505),new L.LatLng(42.41997, 1.99422),new L.LatLng(42.39893, 1.99768),new L.LatLng(42.40636, 2.00361),new L.LatLng(42.40898, 2.01124),new L.LatLng(42.40337, 2.08054),new L.LatLng(42.43218, 2.10357),new L.LatLng(42.44865, 2.14306),new L.LatLng(42.45149, 2.16869),new L.LatLng(42.44542, 2.19492),new L.LatLng(42.45315, 2.22342),new L.LatLng(42.46357, 2.24135),new L.LatLng(42.46584, 2.25716),new L.LatLng(42.45463, 2.29521),new L.LatLng(42.45603, 2.30948),new L.LatLng(42.45376, 2.32546),new L.LatLng(42.44375, 2.34568),new L.LatLng(42.43807, 2.36768),new L.LatLng(42.4401, 2.38897),new L.LatLng(42.4382, 2.38995),new L.LatLng(42.44617, 2.40223),new L.LatLng(42.43756, 2.41382),new L.LatLng(42.43975, 2.44058),new L.LatLng(42.43635, 2.45653),new L.LatLng(42.43035, 2.45964),new L.LatLng(42.41286, 2.45767),new L.LatLng(42.40473, 2.46607),new L.LatLng(42.39337, 2.47089),new L.LatLng(42.37955, 2.49203),new L.LatLng(42.37017, 2.5007),new L.LatLng(42.3658, 2.52122),new L.LatLng(42.37826, 2.53774),new L.LatLng(42.38488, 2.56695),new L.LatLng(42.3833, 2.59453),new L.LatLng(42.37496, 2.61825),new L.LatLng(42.38651, 2.61513),new L.LatLng(42.39833, 2.61854),new L.LatLng(42.42132, 2.64526),new L.LatLng(42.43641, 2.63571),new L.LatLng(42.45003, 2.63569),new L.LatLng(42.45112, 2.64872),new L.LatLng(42.44559, 2.66714),new L.LatLng(42.4454, 2.68172),new L.LatLng(42.44579, 2.697),new L.LatLng(42.45023, 2.69735),new L.LatLng(42.45165, 2.70447),new L.LatLng(42.44806, 2.71026),new L.LatLng(42.45263, 2.75639),new L.LatLng(42.44775, 2.77649),new L.LatLng(42.46454, 2.80081),new L.LatLng(42.47834, 2.81359),new L.LatLng(42.48421, 2.82542),new L.LatLng(42.48598, 2.84289),new L.LatLng(42.4925, 2.85584),new L.LatLng(42.49467, 2.87024),new L.LatLng(42.48787, 2.90052),new L.LatLng(42.50627, 2.93086),new L.LatLng(42.509, 2.94457),new L.LatLng(42.50712, 2.96092),new L.LatLng(42.49983, 2.97435),new L.LatLng(42.50216, 2.98997),new L.LatLng(42.49891, 3.01501),new L.LatLng(42.5019, 3.03199),new L.LatLng(42.49906, 3.05361),new L.LatLng(42.48951, 3.07003),new L.LatLng(42.46694, 3.08313),new L.LatLng(42.45994, 3.09468),new L.LatLng(42.46536, 3.12097),new L.LatLng(42.46168, 3.14502),new L.LatLng(42.46261, 3.43698),new L.LatLng(40.52065, 3.42412),new L.LatLng(40.49606, 0.51562),new L.LatLng(40.50384, 0.47463),new L.LatLng(40.52674, 0.41492),new L.LatLng(40.54219, 0.40245),new L.LatLng(40.56436, 0.39893),new L.LatLng(40.57879, 0.37797),new L.LatLng(40.58119, 0.33371),new L.LatLng(40.59385, 0.33077),new L.LatLng(40.59591, 0.31505),new L.LatLng(40.60165, 0.3029),new L.LatLng(40.59405, 0.29124),new L.LatLng(40.60641, 0.26035),new L.LatLng(40.6221, 0.2427),new L.LatLng(40.63682, 0.23201),new L.LatLng(40.64622, 0.23026),new L.LatLng(40.67282, 0.2371),new L.LatLng(40.68065, 0.21383),new L.LatLng(40.69748, 0.20114),new L.LatLng(40.70253, 0.16896),new L.LatLng(40.7118, 0.14707),new L.LatLng(40.7198, 0.13857),new L.LatLng(40.74909, 0.12488),new L.LatLng(40.7674, 0.13318),new L.LatLng(40.77494, 0.14586),new L.LatLng(40.78385, 0.18409),new L.LatLng(40.79314, 0.2002),new L.LatLng(40.80563, 0.20866),new L.LatLng(40.82283, 0.2314),new L.LatLng(40.84644, 0.21807),new L.LatLng(40.86268, 0.216),new L.LatLng(40.87336, 0.20621),new L.LatLng(40.87855, 0.20181),new L.LatLng(40.86694, 0.17371),new L.LatLng(40.86768, 0.15377),new L.LatLng(40.87628, 0.1379),new L.LatLng(40.89037, 0.12675),new L.LatLng(40.93069, 0.12702),new L.LatLng(40.93587, 0.14132),new L.LatLng(40.93463, 0.224),new L.LatLng(40.9667, 0.24836),new L.LatLng(41.00875, 0.22405),new L.LatLng(41.02249, 0.19535),new L.LatLng(41.03394, 0.18476),new L.LatLng(41.06212, 0.18202),new L.LatLng(41.07289, 0.16924),new L.LatLng(41.08339, 0.16509),new L.LatLng(41.13481, 0.16711),new L.LatLng(41.155, 0.18661),new L.LatLng(41.16106, 0.19742),new L.LatLng(41.16312, 0.22196),new L.LatLng(41.17445, 0.23797),new L.LatLng(41.17683, 0.26082),new L.LatLng(41.18127, 0.26958),new L.LatLng(41.22863, 0.28506),new L.LatLng(41.23915, 0.29212),new L.LatLng(41.24944, 0.30833),new L.LatLng(41.2576, 0.34016),new L.LatLng(41.27566, 0.34467),new L.LatLng(41.29263, 0.3324),new L.LatLng(41.30309, 0.32927),new L.LatLng(41.3173, 0.31527),new L.LatLng(41.37445, 0.29692),new L.LatLng(41.38371, 0.2877),new L.LatLng(41.39398, 0.28454),new L.LatLng(41.41183, 0.29193),new L.LatLng(41.42875, 0.31041),new L.LatLng(41.43934, 0.30858),new L.LatLng(41.44989, 0.31216),new L.LatLng(41.47846, 0.30309),new L.LatLng(41.48897, 0.30343),new L.LatLng(41.50087, 0.31042),new L.LatLng(41.50979, 0.32439),new L.LatLng(41.5142, 0.34729),new L.LatLng(41.51271, 0.37363),new L.LatLng(41.52598, 0.38376),new L.LatLng(41.53111, 0.41769),new L.LatLng(41.53786, 0.42032),new L.LatLng(41.54628, 0.41848),new L.LatLng(41.5504, 0.41113),new L.LatLng(41.54994, 0.4011),new L.LatLng(41.56689, 0.3951),new L.LatLng(41.57428, 0.33684),new L.LatLng(41.57986, 0.32494),new L.LatLng(41.58844, 0.31678),new L.LatLng(41.6209, 0.31046),new L.LatLng(41.63113, 0.31252),new L.LatLng(41.65112, 0.29444),new L.LatLng(41.6694, 0.28989),new L.LatLng(41.69025, 0.29388),new L.LatLng(41.71067, 0.31126),new L.LatLng(41.71054, 0.28554),new L.LatLng(41.72891, 0.28473),new L.LatLng(41.73349, 0.29896),new L.LatLng(41.73286, 0.32387),new L.LatLng(41.72738, 0.33322),new L.LatLng(41.73694, 0.33664),new L.LatLng(41.77657, 0.3733),new L.LatLng(41.78293, 0.38661),new L.LatLng(41.7911, 0.43811),new L.LatLng(41.8199, 0.45765),new L.LatLng(41.84449, 0.49399),new L.LatLng(41.84957, 0.51674),new L.LatLng(41.86124, 0.52065),new L.LatLng(41.87098, 0.56886),new L.LatLng(41.89931, 0.59512),new L.LatLng(41.91544, 0.59548),new L.LatLng(41.92085, 0.57851),new L.LatLng(41.92307, 0.53454),new L.LatLng(41.93186, 0.52631),new L.LatLng(41.94392, 0.52687),new L.LatLng(41.96049, 0.53666),new L.LatLng(41.98417, 0.55991),new L.LatLng(41.99401, 0.58192),new L.LatLng(42.00941, 0.5948),new L.LatLng(42.01838, 0.61688),new L.LatLng(42.03007, 0.61628),new L.LatLng(42.04843, 0.62272),new L.LatLng(42.0606, 0.63379),new L.LatLng(42.10284, 0.65188),new L.LatLng(42.11482, 0.66319),new L.LatLng(42.13941, 0.65938),new L.LatLng(42.18103, 0.66337),new L.LatLng(42.21911, 0.67802),new L.LatLng(42.23518, 0.68062),new L.LatLng(42.26368, 0.70083),new L.LatLng(42.28983, 0.70381),new L.LatLng(42.31359, 0.71339),new L.LatLng(42.33039, 0.7063),new L.LatLng(42.34225, 0.70648),new L.LatLng(42.35548, 0.69008),new L.LatLng(42.37055, 0.68697),new L.LatLng(42.36935, 0.58728),new L.LatLng(42.36066, 0.5542),new L.LatLng(42.36925, 0.48479),new L.LatLng(42.42879, 0.48808),new L.LatLng(42.45199, 0.52073),new L.LatLng(42.45867, 0.65592),new L.LatLng(42.47683, 0.65662),new L.LatLng(42.49173, 0.65521),new L.LatLng(42.50567, 0.6646),new L.LatLng(42.51976, 0.68541),new L.LatLng(42.53645, 0.68815),new L.LatLng(42.55578, 0.70255),new L.LatLng(42.56377, 0.71436),new L.LatLng(42.58658, 0.72389),new L.LatLng(42.60168, 0.68327),new L.LatLng(42.60909, 0.6723),new L.LatLng(42.61988, 0.66402),new L.LatLng(42.61761, 0.59368),new L.LatLng(42.6218, 0.58647),new L.LatLng(42.6432, 0.58506),new L.LatLng(42.65763, 0.5883),new L.LatLng(42.6609, 0.61334),new L.LatLng(42.66076, 0.64249),new L.LatLng(42.67625, 0.62776),new L.LatLng(42.69016, 0.62347),new L.LatLng(42.70055, 0.62586),new L.LatLng(42.71191, 0.6377),new L.LatLng(42.72096, 0.63661),new L.LatLng(42.72687, 0.6334),new L.LatLng(42.73576, 0.6119),new L.LatLng(42.75329, 0.60201),new L.LatLng(42.76368, 0.6044),new L.LatLng(42.77301, 0.61228),new L.LatLng(42.78268, 0.60937),new L.LatLng(42.79307, 0.61176),new L.LatLng(42.8113, 0.62807),new L.LatLng(42.8379, 0.62242),new L.LatLng(42.8537, 0.62909),new L.LatLng(42.87403, 0.65099),new L.LatLng(42.88012, 0.66267),new L.LatLng(42.88247, 0.68465),new L.LatLng(42.88885, 0.70786),new L.LatLng(42.88604, 0.7319),new L.LatLng(42.8649, 0.78228),new L.LatLng(42.86706, 0.80979),new L.LatLng(42.86347, 0.82601),new L.LatLng(42.85611, 0.84146),new L.LatLng(42.85135, 0.87194),new L.LatLng(42.82355, 0.92632),new L.LatLng(42.831, 0.94768),new L.LatLng(42.83247, 0.96166),new L.LatLng(42.82784, 0.9816),new L.LatLng(42.81704, 0.99834),new L.LatLng(42.81758, 1.01035),new L.LatLng(42.8103, 1.05644),new L.LatLng(42.81542, 1.07679),new L.LatLng(42.81359, 1.09255),new L.LatLng(42.77932, 1.14903),new L.LatLng(42.76122, 1.16591),new L.LatLng(42.7459, 1.16879),new L.LatLng(42.74125, 1.17361),new L.LatLng(42.75431, 1.22647),new L.LatLng(42.7532, 1.24123),new L.LatLng(42.74519, 1.26558),new L.LatLng(42.74587, 1.30283),new L.LatLng(42.75025, 1.31611),new L.LatLng(42.75118, 1.33717),new L.LatLng(42.74513, 1.37041),new L.LatLng(42.73924, 1.38315),new L.LatLng(42.73059, 1.39132),new L.LatLng(42.71781, 1.39487),new L.LatLng(42.70787, 1.41312),new L.LatLng(42.69654, 1.42299),new L.LatLng(42.703, 1.4805),new L.LatLng(42.69861, 1.52276),new L.LatLng(42.699, 1.55743),new L.LatLng(42.69577, 1.56698),new L.LatLng(42.6783, 1.567),new L.LatLng(42.67588, 1.47124),new L.LatLng(42.6627, 1.47063),new L.LatLng(42.66013, 1.4493),new L.LatLng(42.64028, 1.45352),new L.LatLng(42.60832, 1.47905),new L.LatLng(42.58542, 1.47429),new L.LatLng(42.57007, 1.48037),new L.LatLng(42.55757, 1.47789),new L.LatLng(42.51371, 1.50398),new L.LatLng(42.50251, 1.50264),new L.LatLng(42.4936, 1.49659),new L.LatLng(42.48053, 1.47661),new L.LatLng(42.46117, 1.48399),new L.LatLng(42.45867, 1.5206),new L.LatLng(42.46797, 1.52463),new L.LatLng(42.47855, 1.53619),new L.LatLng(42.48124, 1.56349),new L.LatLng(42.48635, 1.56995),new L.LatLng(42.48084, 1.57416),new L.LatLng(42.47981, 1.58407),new L.LatLng(42.48182, 1.6297),new L.LatLng(42.48908, 1.63281),new L.LatLng(42.49918, 1.64987),new L.LatLng(42.50093, 1.65871),new L.LatLng(42.51497, 1.65741),new L.LatLng(42.5225, 1.64167),new L.LatLng(42.53054, 1.65733),new L.LatLng(42.53082, 1.68071),new L.LatLng(42.52263, 1.69775),new L.LatLng(42.5275, 1.70981),new L.LatLng(42.52965, 1.72722),new L.LatLng(42.5279, 1.73886),new L.LatLng(42.52127, 1.75193)];
var catContorn5k= [new L.LatLng(42.50517, 1.74015),new L.LatLng(42.50508, 1.75231),new L.LatLng(42.49914, 1.76811),new L.LatLng(42.49701, 1.78041),new L.LatLng(42.49665, 1.79101),new L.LatLng(42.50094, 1.80553),new L.LatLng(42.50029, 1.81035),new L.LatLng(42.49591, 1.81816),new L.LatLng(42.49614, 1.82908),new L.LatLng(42.49146, 1.84217),new L.LatLng(42.48457, 1.85385),new L.LatLng(42.47597, 1.85927),new L.LatLng(42.47598, 1.86827),new L.LatLng(42.46996, 1.88694),new L.LatLng(42.46682, 1.8922),new L.LatLng(42.46095, 1.89575),new L.LatLng(42.46147, 1.89916),new L.LatLng(42.4582, 1.91748),new L.LatLng(42.46348, 1.92895),new L.LatLng(42.4637, 1.93877),new L.LatLng(42.46211, 1.94539),new L.LatLng(42.48334, 1.95252),new L.LatLng(42.48655, 1.95536),new L.LatLng(42.4891, 1.96127),new L.LatLng(42.50267, 1.97239),new L.LatLng(42.50481, 1.98051),new L.LatLng(42.50311, 1.99676),new L.LatLng(42.49285, 2.00878),new L.LatLng(42.48738, 2.0114),new L.LatLng(42.48392, 2.01053),new L.LatLng(42.4788, 2.00307),new L.LatLng(42.47525, 2.00084),new L.LatLng(42.47196, 2.00335),new L.LatLng(42.46437, 2.01943),new L.LatLng(42.45866, 2.02509),new L.LatLng(42.45372, 2.02716),new L.LatLng(42.44784, 2.02527),new L.LatLng(42.44232, 2.01822),new L.LatLng(42.44018, 2.00592),new L.LatLng(42.43959, 1.98574),new L.LatLng(42.44786, 1.95523),new L.LatLng(42.43822, 1.955),new L.LatLng(42.43316, 1.96589),new L.LatLng(42.42901, 1.97046),new L.LatLng(42.42558, 1.97144),new L.LatLng(42.41383, 1.96922),new L.LatLng(42.40703, 1.97375),new L.LatLng(42.39692, 1.97325),new L.LatLng(42.39367, 1.97644),new L.LatLng(42.38651, 1.97773),new L.LatLng(42.38238, 1.98168),new L.LatLng(42.37906, 1.99019),new L.LatLng(42.37109, 1.99596),new L.LatLng(42.37043, 2.00041),new L.LatLng(42.3636, 2.01389),new L.LatLng(42.36913, 2.03309),new L.LatLng(42.36933, 2.05667),new L.LatLng(42.37587, 2.06847),new L.LatLng(42.37626, 2.07759),new L.LatLng(42.38356, 2.08441),new L.LatLng(42.39077, 2.10355),new L.LatLng(42.39989, 2.10477),new L.LatLng(42.40539, 2.11168),new L.LatLng(42.41204, 2.11373),new L.LatLng(42.42141, 2.12204),new L.LatLng(42.42471, 2.12914),new L.LatLng(42.42681, 2.13867),new L.LatLng(42.43391, 2.15369),new L.LatLng(42.43509, 2.17157),new L.LatLng(42.42937, 2.18586),new L.LatLng(42.42833, 2.2014),new L.LatLng(42.43609, 2.22114),new L.LatLng(42.43945, 2.24024),new L.LatLng(42.44675, 2.2475),new L.LatLng(42.44966, 2.25793),new L.LatLng(42.44374, 2.27868),new L.LatLng(42.43495, 2.29578),new L.LatLng(42.43963, 2.30503),new L.LatLng(42.43863, 2.31835),new L.LatLng(42.43381, 2.32843),new L.LatLng(42.42757, 2.33225),new L.LatLng(42.42769, 2.34516),new L.LatLng(42.4251, 2.35378),new L.LatLng(42.42188, 2.35666),new L.LatLng(42.41583, 2.35776),new L.LatLng(42.41379, 2.36429),new L.LatLng(42.41128, 2.37448),new L.LatLng(42.41058, 2.39162),new L.LatLng(42.40545, 2.40103),new L.LatLng(42.403, 2.41417),new L.LatLng(42.40462, 2.42789),new L.LatLng(42.40367, 2.43777),new L.LatLng(42.40076, 2.44325),new L.LatLng(42.39552, 2.44718),new L.LatLng(42.3824, 2.4472),new L.LatLng(42.38018, 2.45065),new L.LatLng(42.37978, 2.45924),new L.LatLng(42.3775, 2.46448),new L.LatLng(42.37217, 2.46872),new L.LatLng(42.36661, 2.47803),new L.LatLng(42.35235, 2.48794),new L.LatLng(42.35396, 2.4988),new L.LatLng(42.35339, 2.50555),new L.LatLng(42.34664, 2.52081),new L.LatLng(42.34392, 2.53133),new L.LatLng(42.34433, 2.53438),new L.LatLng(42.34952, 2.54209),new L.LatLng(42.35899, 2.54361),new L.LatLng(42.36235, 2.54644),new L.LatLng(42.36888, 2.57056),new L.LatLng(42.36694, 2.59359),new L.LatLng(42.36368, 2.59874),new L.LatLng(42.35676, 2.62026),new L.LatLng(42.3575, 2.6327),new L.LatLng(42.35526, 2.64054),new L.LatLng(42.35507, 2.65384),new L.LatLng(42.3522, 2.66469),new L.LatLng(42.35512, 2.6647),new L.LatLng(42.35813, 2.65794),new L.LatLng(42.36382, 2.65194),new L.LatLng(42.37333, 2.65051),new L.LatLng(42.38374, 2.64178),new L.LatLng(42.38841, 2.64054),new L.LatLng(42.39428, 2.64276),new L.LatLng(42.3979, 2.64738),new L.LatLng(42.39948, 2.65466),new L.LatLng(42.39869, 2.66168),new L.LatLng(42.40657, 2.66099),new L.LatLng(42.41371, 2.66831),new L.LatLng(42.41672, 2.67627),new L.LatLng(42.41755, 2.68812),new L.LatLng(42.42164, 2.69803),new L.LatLng(42.43088, 2.71218),new L.LatLng(42.43538, 2.73424),new L.LatLng(42.43572, 2.76224),new L.LatLng(42.4328, 2.76734),new L.LatLng(42.42605, 2.77096),new L.LatLng(42.42455, 2.7739),new L.LatLng(42.4278, 2.77907),new L.LatLng(42.42943, 2.79174),new L.LatLng(42.44012, 2.79805),new L.LatLng(42.44231, 2.80359),new L.LatLng(42.44794, 2.80837),new L.LatLng(42.4506, 2.81381),new L.LatLng(42.45087, 2.82236),new L.LatLng(42.45879, 2.82401),new L.LatLng(42.46659, 2.83088),new L.LatLng(42.46941, 2.8359),new L.LatLng(42.4701, 2.84055),new L.LatLng(42.46731, 2.85282),new L.LatLng(42.47266, 2.85678),new L.LatLng(42.47769, 2.86632),new L.LatLng(42.47848, 2.8714),new L.LatLng(42.47649, 2.88045),new L.LatLng(42.47182, 2.88858),new L.LatLng(42.47211, 2.89672),new L.LatLng(42.46814, 2.90856),new L.LatLng(42.46786, 2.91433),new L.LatLng(42.48108, 2.9232),new L.LatLng(42.49229, 2.94343),new L.LatLng(42.49298, 2.94809),new L.LatLng(42.49034, 2.9567),new L.LatLng(42.4872, 2.95948),new L.LatLng(42.48194, 2.9701),new L.LatLng(42.47835, 2.97329),new L.LatLng(42.48433, 2.98319),new L.LatLng(42.48592, 2.9895),new L.LatLng(42.484, 3.00718),new L.LatLng(42.47984, 3.01327),new L.LatLng(42.48571, 3.03277),new L.LatLng(42.48377, 3.04673),new L.LatLng(42.47886, 3.05291),new L.LatLng(42.46323, 3.06012),new L.LatLng(42.45758, 3.06452),new L.LatLng(42.45091, 3.07662),new L.LatLng(42.44574, 3.08039),new L.LatLng(42.4435, 3.08615),new L.LatLng(42.43665, 3.09085),new L.LatLng(42.43632, 3.09474),new L.LatLng(42.4445, 3.10362),new L.LatLng(42.44916, 3.12208),new L.LatLng(42.44621, 3.131),new L.LatLng(42.44462, 3.14601),new L.LatLng(42.44714, 3.15836),new L.LatLng(42.44641, 3.43801),new L.LatLng(42.44374, 3.44659),new L.LatLng(42.44081, 3.4492),new L.LatLng(40.54942, 3.43722),new L.LatLng(40.54307, 3.43372),new L.LatLng(40.54113, 3.42988),new L.LatLng(40.54119, 2.88996),new L.LatLng(40.51763, 0.52223),new L.LatLng(40.51588, 0.51596),new L.LatLng(40.52249, 0.48404),new L.LatLng(40.53491, 0.4509),new L.LatLng(40.53567, 0.44494),new L.LatLng(40.54263, 0.43052),new L.LatLng(40.55259, 0.42519),new L.LatLng(40.55725, 0.42582),new L.LatLng(40.56615, 0.42354),new L.LatLng(40.57404, 0.42582),new L.LatLng(40.58798, 0.4021),new L.LatLng(40.5956, 0.39501),new L.LatLng(40.59914, 0.38467),new L.LatLng(40.59808, 0.37254),new L.LatLng(40.59865, 0.36088),new L.LatLng(40.60106, 0.35071),new L.LatLng(40.60017, 0.34393),new L.LatLng(40.60144, 0.3356),new L.LatLng(40.60788, 0.31125),new L.LatLng(40.61671, 0.29612),new L.LatLng(40.61713, 0.2876),new L.LatLng(40.62278, 0.27524),new L.LatLng(40.62664, 0.27046),new L.LatLng(40.6317, 0.26759),new L.LatLng(40.63458, 0.26268),new L.LatLng(40.64226, 0.25638),new L.LatLng(40.64685, 0.25474),new L.LatLng(40.6546, 0.25911),new L.LatLng(40.66506, 0.25812),new L.LatLng(40.6789, 0.26769),new L.LatLng(40.68171, 0.27491),new L.LatLng(40.68615, 0.27788),new L.LatLng(40.68882, 0.27088),new L.LatLng(40.69673, 0.26369),new L.LatLng(40.69863, 0.25922),new L.LatLng(40.6934, 0.25007),new L.LatLng(40.69234, 0.245),new L.LatLng(40.69271, 0.23824),new L.LatLng(40.6956, 0.23102),new L.LatLng(40.71371, 0.21854),new L.LatLng(40.72207, 0.21507),new L.LatLng(40.71771, 0.20291),new L.LatLng(40.7176, 0.19421),new L.LatLng(40.71961, 0.19014),new L.LatLng(40.72036, 0.18076),new L.LatLng(40.72604, 0.16603),new L.LatLng(40.73058, 0.15997),new L.LatLng(40.75151, 0.14954),new L.LatLng(40.75832, 0.15287),new L.LatLng(40.76105, 0.15954),new L.LatLng(40.76043, 0.16688),new L.LatLng(40.76494, 0.17296),new L.LatLng(40.76597, 0.18822),new L.LatLng(40.76862, 0.19276),new L.LatLng(40.76972, 0.19877),new L.LatLng(40.77803, 0.20892),new L.LatLng(40.77789, 0.22208),new L.LatLng(40.77989, 0.22377),new L.LatLng(40.79216, 0.22449),new L.LatLng(40.79514, 0.22693),new L.LatLng(40.80052, 0.23693),new L.LatLng(40.80591, 0.24232),new L.LatLng(40.80889, 0.24956),new L.LatLng(40.8199, 0.25591),new L.LatLng(40.82443, 0.26295),new L.LatLng(40.83502, 0.25151),new L.LatLng(40.84491, 0.24543),new L.LatLng(40.85078, 0.2447),new L.LatLng(40.85401, 0.24142),new L.LatLng(40.86463, 0.24075),new L.LatLng(40.8725, 0.24283),new L.LatLng(40.87996, 0.23073),new L.LatLng(40.88733, 0.22785),new L.LatLng(40.9009, 0.23842),new L.LatLng(40.91312, 0.23799),new L.LatLng(40.91937, 0.24247),new L.LatLng(40.92385, 0.24318),new L.LatLng(40.93602, 0.25237),new L.LatLng(40.93966, 0.26228),new L.LatLng(40.94553, 0.25996),new L.LatLng(40.94967, 0.26083),new L.LatLng(40.95813, 0.26858),new L.LatLng(40.96059, 0.27333),new L.LatLng(40.97047, 0.27527),new L.LatLng(40.97802, 0.27005),new L.LatLng(40.98476, 0.27055),new L.LatLng(40.99632, 0.25878),new L.LatLng(41.00438, 0.25849),new L.LatLng(41.00718, 0.25298),new L.LatLng(41.01167, 0.24929),new L.LatLng(41.01794, 0.24807),new L.LatLng(41.02442, 0.25077),new L.LatLng(41.02777, 0.24692),new L.LatLng(41.0269, 0.23708),new L.LatLng(41.02945, 0.22634),new L.LatLng(41.03483, 0.22017),new L.LatLng(41.03746, 0.21262),new L.LatLng(41.04218, 0.20794),new L.LatLng(41.05024, 0.20698),new L.LatLng(41.05646, 0.21202),new L.LatLng(41.06308, 0.20731),new L.LatLng(41.07186, 0.20703),new L.LatLng(41.0767, 0.20405),new L.LatLng(41.0802, 0.19405),new L.LatLng(41.08757, 0.18958),new L.LatLng(41.1081, 0.18955),new L.LatLng(41.118, 0.1948),new L.LatLng(41.12276, 0.19075),new L.LatLng(41.1303, 0.1904),new L.LatLng(41.13559, 0.19517),new L.LatLng(41.13862, 0.20174),new L.LatLng(41.14331, 0.20373),new L.LatLng(41.14698, 0.20948),new L.LatLng(41.14729, 0.21922),new L.LatLng(41.14088, 0.23959),new L.LatLng(41.14688, 0.24279),new L.LatLng(41.1545, 0.24236),new L.LatLng(41.15783, 0.24501),new L.LatLng(41.16067, 0.25332),new L.LatLng(41.16014, 0.2693),new L.LatLng(41.17166, 0.2924),new L.LatLng(41.18924, 0.2954),new L.LatLng(41.2015, 0.30138),new L.LatLng(41.22501, 0.3088),new L.LatLng(41.23064, 0.31255),new L.LatLng(41.23486, 0.31915),new L.LatLng(41.23512, 0.32789),new L.LatLng(41.24066, 0.33646),new L.LatLng(41.24086, 0.34674),new L.LatLng(41.23813, 0.35316),new L.LatLng(41.24608, 0.35709),new L.LatLng(41.24866, 0.36297),new L.LatLng(41.25326, 0.36356),new L.LatLng(41.25775, 0.36688),new L.LatLng(41.26887, 0.36726),new L.LatLng(41.27925, 0.37271),new L.LatLng(41.30186, 0.35518),new L.LatLng(41.30874, 0.3549),new L.LatLng(41.314, 0.35894),new L.LatLng(41.32057, 0.34264),new L.LatLng(41.32563, 0.33856),new L.LatLng(41.3307, 0.33751),new L.LatLng(41.33751, 0.34002),new L.LatLng(41.34967, 0.35139),new L.LatLng(41.35397, 0.36165),new L.LatLng(41.36615, 0.35189),new L.LatLng(41.39009, 0.31322),new L.LatLng(41.39637, 0.30945),new L.LatLng(41.40104, 0.31097),new L.LatLng(41.409, 0.31769),new L.LatLng(41.42086, 0.3333),new L.LatLng(41.43108, 0.33779),new L.LatLng(41.4348, 0.33464),new L.LatLng(41.44025, 0.33349),new L.LatLng(41.4438, 0.33456),new L.LatLng(41.45189, 0.34155),new L.LatLng(41.45931, 0.335),new L.LatLng(41.46508, 0.33462),new L.LatLng(41.47355, 0.3299),new L.LatLng(41.48662, 0.32775),new L.LatLng(41.4933, 0.33207),new L.LatLng(41.49623, 0.33822),new L.LatLng(41.49804, 0.34904),new L.LatLng(41.49577, 0.35724),new L.LatLng(41.49533, 0.37098),new L.LatLng(41.49708, 0.38355),new L.LatLng(41.49994, 0.3907),new L.LatLng(41.52233, 0.40791),new L.LatLng(41.52938, 0.41782),new L.LatLng(41.54774, 0.434),new L.LatLng(41.56333, 0.42081),new L.LatLng(41.56676, 0.41976),new L.LatLng(41.57203, 0.42165),new L.LatLng(41.58029, 0.41926),new L.LatLng(41.58979, 0.42456),new L.LatLng(41.59204, 0.42355),new L.LatLng(41.58581, 0.40434),new L.LatLng(41.58865, 0.39139),new L.LatLng(41.59243, 0.34918),new L.LatLng(41.59481, 0.34238),new L.LatLng(41.59767, 0.33966),new L.LatLng(41.62375, 0.33543),new L.LatLng(41.62857, 0.33706),new L.LatLng(41.63289, 0.34136),new L.LatLng(41.65491, 0.32612),new L.LatLng(41.6575, 0.32006),new L.LatLng(41.66036, 0.31734),new L.LatLng(41.67209, 0.31489),new L.LatLng(41.68306, 0.31611),new L.LatLng(41.69086, 0.32084),new L.LatLng(41.70518, 0.33463),new L.LatLng(41.72091, 0.35762),new L.LatLng(41.73083, 0.35909),new L.LatLng(41.7338, 0.36157),new L.LatLng(41.73614, 0.36711),new L.LatLng(41.74863, 0.37547),new L.LatLng(41.75067, 0.37929),new L.LatLng(41.75103, 0.38727),new L.LatLng(41.76027, 0.38767),new L.LatLng(41.76563, 0.39125),new L.LatLng(41.76779, 0.39527),new L.LatLng(41.76994, 0.40814),new L.LatLng(41.77279, 0.42947),new L.LatLng(41.77252, 0.43713),new L.LatLng(41.77593, 0.44776),new L.LatLng(41.77508, 0.45997),new L.LatLng(41.79348, 0.46392),new L.LatLng(41.80938, 0.47619),new L.LatLng(41.81522, 0.48554),new L.LatLng(41.816, 0.49026),new L.LatLng(41.82311, 0.49508),new L.LatLng(41.83277, 0.51135),new L.LatLng(41.83356, 0.51593),new L.LatLng(41.83123, 0.53794),new L.LatLng(41.8382, 0.54228),new L.LatLng(41.84615, 0.54119),new L.LatLng(41.85332, 0.5426),new L.LatLng(41.86075, 0.54777),new L.LatLng(41.86477, 0.55651),new L.LatLng(41.86386, 0.56951),new L.LatLng(41.8716, 0.57301),new L.LatLng(41.87823, 0.59016),new L.LatLng(41.88044, 0.5856),new L.LatLng(41.88673, 0.58184),new L.LatLng(41.90931, 0.58921),new L.LatLng(41.91517, 0.58481),new L.LatLng(41.92005, 0.58441),new L.LatLng(41.92808, 0.55608),new L.LatLng(41.93275, 0.552),new L.LatLng(41.94162, 0.55134),new L.LatLng(41.95237, 0.55772),new L.LatLng(41.9686, 0.57535),new L.LatLng(41.97365, 0.57848),new L.LatLng(41.97847, 0.5883),new L.LatLng(41.97925, 0.59289),new L.LatLng(41.97784, 0.59992),new L.LatLng(41.98361, 0.60187),new L.LatLng(41.98782, 0.60613),new L.LatLng(41.99309, 0.607),new L.LatLng(41.99722, 0.61097),new L.LatLng(42.00235, 0.62195),new L.LatLng(42.00501, 0.63992),new L.LatLng(42.00817, 0.64789),new L.LatLng(42.01099, 0.6488),new L.LatLng(42.027, 0.64093),new L.LatLng(42.03479, 0.64518),new L.LatLng(42.04383, 0.64633),new L.LatLng(42.0492, 0.65114),new L.LatLng(42.05143, 0.65812),new L.LatLng(42.06775, 0.66063),new L.LatLng(42.08132, 0.67042),new L.LatLng(42.09877, 0.67585),new L.LatLng(42.10607, 0.68485),new L.LatLng(42.11123, 0.68828),new L.LatLng(42.12115, 0.69103),new L.LatLng(42.12948, 0.68599),new L.LatLng(42.14149, 0.68462),new L.LatLng(42.15788, 0.68576),new L.LatLng(42.16469, 0.69288),new L.LatLng(42.16994, 0.68801),new L.LatLng(42.17813, 0.68765),new L.LatLng(42.18156, 0.69055),new L.LatLng(42.1941, 0.69336),new L.LatLng(42.20019, 0.69837),new L.LatLng(42.20635, 0.69756),new L.LatLng(42.21052, 0.69876),new L.LatLng(42.21477, 0.7027),new L.LatLng(42.23058, 0.70428),new L.LatLng(42.23645, 0.71075),new L.LatLng(42.24672, 0.71482),new L.LatLng(42.2566, 0.72399),new L.LatLng(42.26229, 0.72633),new L.LatLng(42.27306, 0.7283),new L.LatLng(42.28347, 0.72733),new L.LatLng(42.28693, 0.72813),new L.LatLng(42.29202, 0.73274),new L.LatLng(42.30628, 0.73515),new L.LatLng(42.31442, 0.7448),new L.LatLng(42.31969, 0.74646),new L.LatLng(42.3203, 0.74145),new L.LatLng(42.32504, 0.73471),new L.LatLng(42.33767, 0.73065),new L.LatLng(42.34392, 0.73302),new L.LatLng(42.35158, 0.74231),new L.LatLng(42.35807, 0.72276),new L.LatLng(42.36534, 0.71284),new L.LatLng(42.36955, 0.71177),new L.LatLng(42.37559, 0.71444),new L.LatLng(42.38726, 0.73415),new L.LatLng(42.39456, 0.72984),new L.LatLng(42.39716, 0.72365),new L.LatLng(42.40357, 0.7165),new L.LatLng(42.41046, 0.71625),new L.LatLng(42.41729, 0.72312),new L.LatLng(42.4231, 0.71751),new L.LatLng(42.42846, 0.70658),new L.LatLng(42.43373, 0.70183),new L.LatLng(42.45025, 0.69622),new L.LatLng(42.46178, 0.69605),new L.LatLng(42.47433, 0.6856),new L.LatLng(42.48826, 0.67991),new L.LatLng(42.49513, 0.68331),new L.LatLng(42.49749, 0.68913),new L.LatLng(42.50311, 0.69245),new L.LatLng(42.50514, 0.69632),new L.LatLng(42.50544, 0.707),new L.LatLng(42.50224, 0.71469),new L.LatLng(42.50607, 0.7197),new L.LatLng(42.50843, 0.71355),new L.LatLng(42.51473, 0.70975),new L.LatLng(42.52228, 0.71253),new L.LatLng(42.53186, 0.71194),new L.LatLng(42.54662, 0.72272),new L.LatLng(42.55724, 0.73851),new L.LatLng(42.56635, 0.74067),new L.LatLng(42.57575, 0.74781),new L.LatLng(42.59684, 0.74914),new L.LatLng(42.605, 0.75373),new L.LatLng(42.60526, 0.73511),new L.LatLng(42.61509, 0.70456),new L.LatLng(42.62187, 0.69275),new L.LatLng(42.63081, 0.68702),new L.LatLng(42.63779, 0.68817),new L.LatLng(42.65467, 0.68411),new L.LatLng(42.66222, 0.67209),new L.LatLng(42.66956, 0.66599),new L.LatLng(42.67579, 0.66363),new L.LatLng(42.67885, 0.65809),new L.LatLng(42.68714, 0.65032),new L.LatLng(42.69597, 0.64971),new L.LatLng(42.70098, 0.65613),new L.LatLng(42.702, 0.66323),new L.LatLng(42.71021, 0.66779),new L.LatLng(42.7186, 0.66214),new L.LatLng(42.72587, 0.66364),new L.LatLng(42.74461, 0.65213),new L.LatLng(42.74748, 0.63533),new L.LatLng(42.74935, 0.63129),new L.LatLng(42.75564, 0.62747),new L.LatLng(42.76099, 0.62961),new L.LatLng(42.76844, 0.63962),new L.LatLng(42.77421, 0.64383),new L.LatLng(42.78161, 0.6359),new L.LatLng(42.78849, 0.63564),new L.LatLng(42.8066, 0.6527),new L.LatLng(42.80874, 0.65716),new L.LatLng(42.81607, 0.65305),new L.LatLng(42.82366, 0.65612),new L.LatLng(42.82914, 0.64996),new L.LatLng(42.83322, 0.64844),new L.LatLng(42.84016, 0.64798),new L.LatLng(42.84549, 0.65043),new L.LatLng(42.85039, 0.65619),new L.LatLng(42.85476, 0.66681),new L.LatLng(42.86053, 0.66728),new L.LatLng(42.86553, 0.67371),new L.LatLng(42.86625, 0.69002),new L.LatLng(42.8727, 0.70958),new L.LatLng(42.86995, 0.72839),new L.LatLng(42.8646, 0.73973),new L.LatLng(42.85801, 0.74719),new L.LatLng(42.85405, 0.76373),new L.LatLng(42.84738, 0.78073),new L.LatLng(42.84742, 0.78631),new L.LatLng(42.85151, 0.7986),new L.LatLng(42.85148, 0.80466),new L.LatLng(42.84856, 0.81794),new L.LatLng(42.83969, 0.83705),new L.LatLng(42.83963, 0.84781),new L.LatLng(42.83689, 0.86262),new L.LatLng(42.83448, 0.86746),new L.LatLng(42.82746, 0.87479),new L.LatLng(42.82015, 0.89711),new L.LatLng(42.80189, 0.92795),new L.LatLng(42.81128, 0.94224),new L.LatLng(42.81645, 0.96092),new L.LatLng(42.81269, 0.97303),new L.LatLng(42.80209, 0.98768),new L.LatLng(42.79745, 0.99074),new L.LatLng(42.80162, 1.00826),new L.LatLng(42.79684, 1.02642),new L.LatLng(42.79671, 1.04113),new L.LatLng(42.79357, 1.05762),new L.LatLng(42.79398, 1.06717),new L.LatLng(42.79827, 1.07352),new L.LatLng(42.79892, 1.08363),new L.LatLng(42.79319, 1.09361),new L.LatLng(42.78817, 1.09648),new L.LatLng(42.7843, 1.10142),new L.LatLng(42.78026, 1.11671),new L.LatLng(42.77424, 1.12242),new L.LatLng(42.77103, 1.12965),new L.LatLng(42.76369, 1.13793),new L.LatLng(42.75524, 1.14494),new L.LatLng(42.75003, 1.14567),new L.LatLng(42.74655, 1.14388),new L.LatLng(42.73982, 1.1477),new L.LatLng(42.73414, 1.1473),new L.LatLng(42.72971, 1.15834),new L.LatLng(42.7205, 1.17021),new L.LatLng(42.72754, 1.18705),new L.LatLng(42.72811, 1.1963),new L.LatLng(42.73137, 1.20662),new L.LatLng(42.73137, 1.21385),new L.LatLng(42.73721, 1.22496),new L.LatLng(42.73828, 1.23103),new L.LatLng(42.73244, 1.2526),new L.LatLng(42.72628, 1.26082),new L.LatLng(42.72934, 1.27172),new L.LatLng(42.72723, 1.28386),new L.LatLng(42.73015, 1.29371),new L.LatLng(42.72897, 1.31037),new L.LatLng(42.73391, 1.32007),new L.LatLng(42.73519, 1.32879),new L.LatLng(42.73452, 1.33904),new L.LatLng(42.73018, 1.34622),new L.LatLng(42.73065, 1.35846),new L.LatLng(42.7281, 1.36729),new L.LatLng(42.72522, 1.37001),new L.LatLng(42.71833, 1.37159),new L.LatLng(42.71373, 1.37052),new L.LatLng(42.70814, 1.36586),new L.LatLng(42.70599, 1.37038),new L.LatLng(42.70408, 1.3837),new L.LatLng(42.69509, 1.39902),new L.LatLng(42.68947, 1.40215),new L.LatLng(42.68176, 1.40036),new L.LatLng(42.67883, 1.40204),new L.LatLng(42.67421, 1.40961),new L.LatLng(42.66739, 1.41386),new L.LatLng(42.66397, 1.42191),new L.LatLng(42.66008, 1.42583),new L.LatLng(42.63167, 1.43238),new L.LatLng(42.62624, 1.44044),new L.LatLng(42.61426, 1.44506),new L.LatLng(42.61178, 1.45269),new L.LatLng(42.60652, 1.45631),new L.LatLng(42.59832, 1.45502),new L.LatLng(42.59083, 1.4511),new L.LatLng(42.58394, 1.44199),new L.LatLng(42.58121, 1.45066),new L.LatLng(42.57702, 1.45546),new L.LatLng(42.56654, 1.45659),new L.LatLng(42.55892, 1.44923),new L.LatLng(42.55355, 1.43546),new L.LatLng(42.55344, 1.44814),new L.LatLng(42.54749, 1.46074),new L.LatLng(42.54312, 1.46426),new L.LatLng(42.53299, 1.468),new L.LatLng(42.51692, 1.47983),new L.LatLng(42.51237, 1.48096),new L.LatLng(42.50828, 1.47986),new L.LatLng(42.50397, 1.47562),new L.LatLng(42.48757, 1.44541),new L.LatLng(42.48127, 1.45304),new L.LatLng(42.47722, 1.45433),new L.LatLng(42.47059, 1.4532),new L.LatLng(42.46534, 1.45986),new L.LatLng(42.45973, 1.46057),new L.LatLng(42.45456, 1.45652),new L.LatLng(42.4461, 1.46018),new L.LatLng(42.44653, 1.47312),new L.LatLng(42.44411, 1.48597),new L.LatLng(42.44438, 1.49832),new L.LatLng(42.44023, 1.51644),new L.LatLng(42.44276, 1.52552),new L.LatLng(42.44443, 1.54125),new L.LatLng(42.45259, 1.54597),new L.LatLng(42.45947, 1.5459),new L.LatLng(42.46872, 1.55684),new L.LatLng(42.46956, 1.5682),new L.LatLng(42.46715, 1.57685),new L.LatLng(42.47338, 1.58489),new L.LatLng(42.47866, 1.59958),new L.LatLng(42.47551, 1.60974),new L.LatLng(42.47558, 1.62837),new L.LatLng(42.4785, 1.63605),new L.LatLng(42.479, 1.64982),new L.LatLng(42.49769, 1.6519),new L.LatLng(42.51027, 1.65916),new L.LatLng(42.51531, 1.66581),new L.LatLng(42.51605, 1.67045),new L.LatLng(42.51464, 1.6772),new L.LatLng(42.5123, 1.68088),new L.LatLng(42.50588, 1.68528),new L.LatLng(42.5059, 1.69257),new L.LatLng(42.50317, 1.7034),new L.LatLng(42.50516, 1.70879),new L.LatLng(42.51124, 1.71534),new L.LatLng(42.51363, 1.72629),new L.LatLng(42.51108, 1.73495)];
 var CatBounds = L.latLngBounds(L.latLng(40.47, 0.1087), L.latLng(42.8855, 3.33669));
var MQ_ATTR='Font:<a  href="http://open.mapquest.co.uk" target="_blank">MapQuest</a>';  
var ESRI_ATTR='Tiles © Esri — Sources: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping,Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';
var ESRI_ATTR_TERRAIN="Tiles © Esri — Sources: Esri, USGS, NOAA";
var ICGC='Font:<a  href="http://www.icc.cat" target="_blank">Institut Cartogràfic i Geològic de Catalunya</a>'; 
var ICGC_MON='Font:Mapa del Món (<a  href="http://www.icc.cat" target="_blank">ICGC</a>)'; 
var ICGC_HISTO='Font:Mapa del 1936 (<a  href="http://www.icc.cat" target="_blank">ICGC</a>)'; 
var _topoLayers=null,TOPO_ICC_L0_6,TOPO_MQ_L7_19,TOPO_ICC_L7_10,TOPO_ICC_L11_19;
var _ortoLayers=null,ORTO_ESRI_L0_19,ORTO_ICC_L0_19,_histoMap;
var ESRI_RELLEU_L0_13;			 
var ICC_RELLEU_L0_14;
var MQ_TOPO_GRIS_L7_19,ICC_TOPO_GRIS_L7_10,ICC_TOPO_GRIS_L11_19;
var COLOR_TOPO_ICC_L0_6,COLOR_TOPO_MQ_L7_19,COLOR_TOPO_ICC_L11_19;
var _terrainLayers=null;
var _topoColorLayers=null;
var _grisLayers=null;
var subDomains=['otile1','otile2','otile3','otile4'];

var URL_MQ='http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png';
var URL_ESRI='http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}';
var URL_ESRI_T='http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}';
var URL_MON='http://172.70.1.11/mapcache/tms/1.0.0/mon3857@GM8/{z}/{x}/{y}.png';
var URL_TOPOICC='http://mapcache.icc.cat/map/bases_noutm/tiles/1.0.0/topo_EPSG900913/{z}/{x}/{y}.jpeg?origin=nw';
var URL_ORTOICC="http://mapcache.icc.cat/map/bases_noutm/tiles/1.0.0/orto_EPSG900913/{z}/{x}/{y}.jpeg?origin=nw";
var URL_TOPOGRIS='http://mapcache.icc.cat/map/bases_noutm/tiles/1.0.0/topogris_EPSG900913/{z}/{x}/{y}.jpeg?origin=nw'
var URL_TOPOCOLOR='http://mapproxyd/map/bases_noutm/tiles/1.0.0/topo_EPSG900913/{z}/{x}/{y}.jpeg';
var URL_HISTORIC='http://172.70.1.11/mapcache/tms/1.0.0/cat1936_3857@GM14/{z}/{x}/{y}.png';
var URL_TERRAIN='http://172.70.1.11/mapcache/tms/1.0.0/relleu3857@GM14/{z}/{x}/{y}.png';


L.IM_Map = L.Map.extend({

options: {
		//maxLoad: 100, // max photos loaded in one request (should be less or equal 100)
		//maxTotal: 300 // max total photos
		typeMap:'topoMap',
		mapColor: ''	
	},

	initialize: function(id,options) {
		L.Map.prototype.initialize.call(this,id,options);
		L.Util.setOptions(this, options);
		   
		this.activeMap=this.options.typeMap;
	    
		if(this.options.typeMap=='topoMap'){this.topoMap();		
		}else if(this.options.typeMap=='ortoMap'){this.ortoMap();
		}else if(this.options.typeMap=='terrainMap'){this.terrainMap();
		}else if(this.options.typeMap=='topoGrisMap'){this.topoGrisMap();
		}else if(this.options.typeMap=='colorMap'){this.colorMap();
		}else if(this.options.typeMap=='historicMap'){this.historicMap();
		}else{
		this.activeMap='topoMap';this.topoMap();
		}
		
		this.on('moveend', function(){
							
			this.gestionaFons();
			})
		
		
		
		
	
	},
	
	getActiveMap:function(){
		return this.options.typeMap;	
	},
	
	setActiveMap:function(typeMap){
		this.options.typeMap = typeMap;	
	},
	
	getMapColor:function(){

		return this.options.mapColor;	
	},
	
	setMapColor:function(mapColor){
		this.options.mapColor = mapColor;	

	},
	
	gestionaFons:function(){		
		var sC=this.miraBBContains(this.getBounds());
		var f=this.getActiveMap();
		var zT=8;
				
		if(f=='topoMap'){ //_topoLayers=null,TOPO_ICC_L0_6,TOPO_MQ_L7_19,TOPO_ICC_L7_10,TOPO_ICC_L11_19;
		console.info(this.getZoom());
			if((sC==0)){  
				TOPO_MQ_L7_19.setOpacity(1);
				TOPO_MQ_L7_19.options.maxZoom=19;
				TOPO_ICC_L11_19.options.maxZoom=zT;
				TOPO_ICC_L7_10.options.maxZoom=zT;
				if(this.getZoom() > 6){
				this.attributionControl.setPrefix(MQ_ATTR);
				}else{this.attributionControl.setPrefix(ICGC_MON);}				
			}else if(sC==1){
				TOPO_MQ_L7_19.setOpacity(0.9);
				TOPO_MQ_L7_19.options.maxZoom=19;
				TOPO_ICC_L11_19.options.maxZoom=19;
				TOPO_ICC_L7_10.options.maxZoom=10;	
				
				if(this.getZoom() > 6){
				
				this.attributionControl.setPrefix(ICGC+ " - "+MQ_ATTR);	
				}else{this.attributionControl.setPrefix(ICGC_MON);}	
			}else if(sC==2){
				TOPO_MQ_L7_19.options.maxZoom=zT;
				TOPO_ICC_L11_19.options.maxZoom=19;
				TOPO_ICC_L7_10.options.maxZoom=10;	
				this.attributionControl.setPrefix(ICGC);				
			}
			
			
			
		}else if(f=='ortoMap'){
		
					
			if((sC==0)){ //Fora Cat
					ORTO_ESRI_L0_19.options.maxZoom=19;			 
					ORTO_ICC_L0_19.options.maxZoom=zT;
					ORTO_ESRI_L0_19.setOpacity(1);
					this.attributionControl.setPrefix(ESRI_ATTR);				
				}else if(sC==1){ //Cat i altres
					ORTO_ESRI_L0_19.options.maxZoom=19;			 
					ORTO_ICC_L0_19.options.maxZoom=19;
					ORTO_ESRI_L0_19.setOpacity(0.8);					
					this.attributionControl.setPrefix(ICGC+ ","+ESRI_ATTR);	
				}else if(sC==2){ //Nomes cat
					ORTO_ESRI_L0_19.options.maxZoom=zT;			 
					ORTO_ICC_L0_19.options.maxZoom=19;					
					this.attributionControl.setPrefix(ICGC);				
				}
				
		
		}else if(f=='terrainMap'){this.terrainMap();
		
		if((sC==0)){ //Fora Cat
					ESRI_RELLEU_L0_13.options.maxZoom=13;			 
					ICC_RELLEU_L0_14.options.maxZoom=zT;
					ESRI_RELLEU_L0_13.setOpacity(1);
					this.attributionControl.setPrefix(ESRI_ATTR_TERRAIN);				
				}else if(sC==1){ //Cat i altres
					ESRI_RELLEU_L0_13.options.maxZoom=13;			 
					ICC_RELLEU_L0_14.options.maxZoom=14;
					ESRI_RELLEU_L0_13.setOpacity(0.8);					
					this.attributionControl.setPrefix(ICGC+ ","+ESRI_ATTR_TERRAIN);	
				}else if(sC==2){ //Nomes cat
					ESRI_RELLEU_L0_13.options.maxZoom=zT;			 
					ICC_RELLEU_L0_14.options.maxZoom=14;					
					this.attributionControl.setPrefix(ICGC);				
				}
		
		}else if(f=='topoGrisMap'){
		

		if((sC==0)){  
				MQ_TOPO_GRIS_L7_19.setOpacity(1);
				MQ_TOPO_GRIS_L7_19.options.maxZoom=19;
				ICC_TOPO_GRIS_L11_19.options.maxZoom=zT;
				ICC_TOPO_GRIS_L7_10.options.maxZoom=zT;
				if(map.getZoom() <= 6){
				this.attributionControl.setPrefix(MQ_ATTR);
				}else{this.attributionControl.setPrefix(ICGC_MON);}				
			}else if(sC==1){
				MQ_TOPO_GRIS_L7_19.setOpacity(0.9);
				MQ_TOPO_GRIS_L7_19.options.maxZoom=19;
				ICC_TOPO_GRIS_L11_19.options.maxZoom=19;
				ICC_TOPO_GRIS_L7_10.options.maxZoom=10;	
				this.attributionControl.setPrefix(ICGC+ ","+MQ_ATTR);	
			}else if(sC==2){
				MQ_TOPO_GRIS_L7_19.options.maxZoom=zT;
				ICC_TOPO_GRIS_L11_19.options.maxZoom=19;
				ICC_TOPO_GRIS_L7_10.options.maxZoom=10;	
				this.attributionControl.setPrefix(ICGC);				
			}
		
		
		
		
		
		}else if(f=='colorMap'){
		
		if((sC==0)){  
				COLOR_TOPO_MQ_L7_19.setOpacity(1);
				COLOR_TOPO_MQ_L7_19.options.maxZoom=19;
				COLOR_TOPO_ICC_L11_19.options.maxZoom=zT;
				
				if(map.getZoom() <= 6){
				this.attributionControl.setPrefix(MQ_ATTR);
				}else{this.attributionControl.setPrefix(ICGC_MON);}				
			}else if(sC==1){
				COLOR_TOPO_MQ_L7_19.setOpacity(0.9);
				COLOR_TOPO_MQ_L7_19.options.maxZoom=19;
				COLOR_TOPO_ICC_L11_19.options.maxZoom=19;
				
				this.attributionControl.setPrefix(ICGC+ ","+MQ_ATTR);	
			}else if(sC==2){
				COLOR_TOPO_MQ_L7_19.options.maxZoom=zT;
				COLOR_TOPO_ICC_L11_19.options.maxZoom=19;
			
				this.attributionControl.setPrefix(ICGC);				
			}
		
		}else if(f=='historicMap'){	
		
		if((sC==0)){
		
		this.fitBounds(CatBounds);
		this.attributionControl.setPrefix(ICGC_HISTO);
		}


		
		
		}else{
		
		}
		
		
	
		
	},
	miraCentreDins:function(x,y){
		var x0=0.1087; //0.7525
		var y0=40.4763; // 40.5263
		var x1=3.33669; // 3.3563
		var y1=42.8855;  // 42.3748
		if(x>=x0&&x<=x1&&y>=y0&&y<=y1){return true;}else{return false;}
	},
	
	miraBBContains:function(MapBounds){
	
		  
		   var cas=0; 
		   var vC=CatBounds.intersects(MapBounds);// True es veu Cat
		   var nC=CatBounds.contains(MapBounds);//True nomes Cat
			   if(!vC){
				cas=0; //Estic fora de Cat
			   }else if(vC && !nC){ //veig Cat i altres
				cas=1;
			   }else if (vC && nC){ //Nomes veig cat
				cas=2
			   }
			return cas;
	
	},
	
	topoMap: function (){
	
			this.deletePreviousMap();
			this.options.typeMap='topoMap';
			this.options.maxZoom=19;
			this.setActiveMap('topoMap');
			this.setMapColor(null);
			 _topoLayers=L.layerGroup();						 
		  TOPO_ICC_L0_6=  new L.TileLayer(URL_MON, {
				   minZoom: 0,
				   maxZoom: 6,
				   tms:true,
				   continuousWorld: true,
				   worldCopyJump:false,
			   }).addTo(_topoLayers);


		 TOPO_MQ_L7_19 =new L.TileLayer(URL_MQ,{   	   
				   minZoom: 7,
				   maxZoom:19,
				   subdomains:subDomains}
			   ).addTo(_topoLayers);
		
	  TOPO_ICC_L7_10 = new L.TileLayer.boundaryCanvas(URL_TOPOICC,
																	  {  	    
				 tms:false,
				  minZoom: 7,
				  maxZoom: 10,	                                                        
				  boundary: catContorn, 
				  continuousWorld: true,
				  worldCopyJump: false
																  }
			).addTo(_topoLayers);
			
		
			
	  TOPO_ICC_L11_19 = new L.TileLayer.boundaryCanvas(URL_TOPOICC,
																	  {  	    
				 tms:false,
				  minZoom: 11,
				  maxZoom: 19,	                                                        
				  boundary: catContorn5k, 
				  continuousWorld: true,
				  worldCopyJump: false
																  }
			).addTo(_topoLayers);
			
	
	this.addLayer(_topoLayers,true);
	
	},
	
	ortoMap: function (){
	
	
			this.deletePreviousMap();	
			this.options.maxZoom=19;
this.setActiveMap('ortoMap');
			this.setMapColor(null);
			this.options.typeMap='ortoMap';
			 _ortoLayers=L.layerGroup();	
	
	/*
			  var MQ_ORTO_L0_7 =new L.TileLayer('http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.png',{   	   
				   minZoom: 0,
				   maxZoom:7,
				   subdomains:subDomains}
			   ).addTo(_ortoLayers);
		*/	  
			
			
			 ORTO_ESRI_L0_19 =new L.TileLayer(URL_ESRI,{   	   
				   minZoom: 0,
				   maxZoom:19}
			   ).addTo(_ortoLayers);

			 
			ORTO_ICC_L0_19 = new L.TileLayer.boundaryCanvas(URL_ORTOICC,
																	  {  	    
				 tms:false,
				  minZoom: 0,
				  maxZoom: 19,	                                                        
				  boundary: catContorn5k, 
				  continuousWorld: true,
				  worldCopyJump: false
																  }
			).addTo(_ortoLayers);
		
		this.addLayer(_ortoLayers,true);
	
	},
	
	terrainMap: function (){
		
	
			this.deletePreviousMap();	
			this.options.maxZoom=14;
this.setActiveMap('terrainMap');
			this.setMapColor(null);
			 _terrainLayers=L.layerGroup();	
	
	
			  ESRI_RELLEU_L0_13 =new L.TileLayer(URL_ESRI_T,{   	   
				   minZoom: 0,
				   maxZoom:13}
			   ).addTo(_terrainLayers);
			  
			
			ICC_RELLEU_L0_14= new L.TileLayer(URL_TERRAIN, {
				   minZoom: 0,
				   maxZoom: 14,
				   tms:true,
				   continuousWorld: true,
				   worldCopyJump: true,
				   color:'gris'
			   }).addTo(_terrainLayers);
		
		this.addLayer(_terrainLayers,true);
	
	
	

	
	},
		
	topoGrisMap: function (){
	
	this.deletePreviousMap();
			this.options.maxZoom=19;
this.setActiveMap('topoGrisMap');
			this.setMapColor(null);
			 _grisLayers=L.layerGroup();				
			
			
			 		  
		  ICC_MON_L0= new L.IM_ColorLayer(URL_MON, {
				   minZoom: 0,
				   maxZoom: 6,
				   tms:true,
				   color:'gris',
				   continuousWorld: true,
				   worldCopyJump: true,
			   }).addTo(_grisLayers);


			 MQ_TOPO_GRIS_L7_19 =new L.IM_ColorLayer(URL_MQ,{   	   
				   minZoom: 7,
				   maxZoom:19,
				    color:'gris',
				   subdomains:subDomains}
			   ).addTo(_grisLayers);
			
			 ICC_TOPO_GRIS_L7_10 = new L.TileLayer.boundaryCanvas(URL_TOPOGRIS,
																	  {  	    
				 tms:false,
				  minZoom: 7,
				  maxZoom: 10,	                                                        
				  boundary: catContorn, 
				  continuousWorld: true,
				  worldCopyJump: false
																  }
			).addTo(_grisLayers);
			
		
			
		ICC_TOPO_GRIS_L11_19 = new L.TileLayer.boundaryCanvas(URL_TOPOGRIS,
																	  {  	    
				 tms:false,
				  minZoom: 11,
				  maxZoom: 19,	                                                        
				  boundary: catContorn5k, 
				  continuousWorld: true,
				  worldCopyJump: false
																  }
			).addTo(_grisLayers);
			
	//_grisLayers.addTo(this);
	
	this.addLayer(_grisLayers,true);
	
	
	},
	
	colorMap: function (color){
		//this.options.maxZoom=19;	
		
	this.options.maxZoom=19;
			this.deletePreviousMap();	
this.setActiveMap('colorMap');
			this.setMapColor(color);
			 _topoColorLayers=L.layerGroup();	
	
	
			 
			 COLOR_TOPO_ICC_L0_6= new L.IM_ColorLayer(URL_MON, {
				   minZoom: 0,
				   maxZoom: 6,
				   tms:true,
				   continuousWorld: true,
				   worldCopyJump: false,
				   color:color
			   }).addTo(_topoColorLayers);
			 
			 COLOR_TOPO_MQ_L7_19 =new L.IM_ColorLayer(URL_MQ,{   	   
				   minZoom: 7,
				   maxZoom:19,
				  color:color,
				   subdomains:subDomains}
			   ).addTo(_topoColorLayers);
			   
			   
			COLOR_TOPO_ICC_L11_19= new L.IM_ColorLayer(URL_TOPOCOLOR, {
				   minZoom: 7,
				   maxZoom: 19,
				   tms:true,
				   continuousWorld: true,
				   worldCopyJump: false,
				   color:color
			   }).addTo(_topoColorLayers);
		
		this.addLayer(_topoColorLayers,true);
	
	
	

	
	},
	historicMap:function(){
		
		this.options.maxZoom=14;
		_histoMap= new
		  L.TileLayer(URL_HISTORIC, {
		  minZoom: 0, maxZoom: 14, tms:true, continuousWorld: true,
		  worldCopyJump:false, }).addTo(map);
		
		
		
		
		
	},
	rmCapa: function (grup,layer){
	
		if(grup.hasLayer(layer)){grup.removeLayer(layer);return}
	
	},
	
	addCapa: function (grup,layer){
	
		if(!grup.hasLayer(layer)){grup.addLayer(layer,true);return}
	
	},
	
	deletePreviousMap: function () {
	
		if(this.hasLayer(_topoLayers)){this.removeLayer(_topoLayers);return}
		else if(this.hasLayer(_ortoLayers)){this.removeLayer(_ortoLayers);return}
		else if(this.hasLayer(_terrainLayers)){this.removeLayer(_terrainLayers);return}
		else if(this.hasLayer(_topoColorLayers)){this.removeLayer(_topoColorLayers);return}
		else if(this.hasLayer(_grisLayers)){this.removeLayer(_grisLayers);return}
		else if(this.hasLayer(_histoMap)){this.removeLayer(_histoMap);return}
	}
	
	
	

	//fi default metode
});
